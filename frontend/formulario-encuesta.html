<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Investigación | CEMI Classroom</title>
  <link rel="icon" href="images/logo.png" type="image/png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-color: #547194;
      --primary-light: #7a9bbd;
      --secondary-color: #5b9bd5;
      --text-primary: #2d3748;
      --text-secondary: #5a6c7d;
      --border-color: #d1d5db;
      --bg-light: #f8f9fa;
      --success-color: #34a853;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: #fff;
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Header */
    .form-header {
      position: sticky;
      top: 0;
      background: white;
      z-index: 100;
      border-bottom: 1px solid #eee;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px 24px;
      position: relative;
    }

    .btn-previous {
      position: absolute;
      left: 24px;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
    }

    .btn-previous:hover {
      background: var(--bg-light);
      border-color: var(--primary-color);
    }

    .btn-previous.hidden {
      visibility: hidden;
    }

    .header-logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .header-logo img {
      height: 32px;
    }

    .header-logo span {
      font-size: 11px;
      color: var(--text-secondary);
      letter-spacing: 0.5px;
    }

    /* Progress Bar */
    .progress-container {
      height: 4px;
      background: #e5e7eb;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      transition: width 0.4s ease;
      border-radius: 0 2px 2px 0;
    }

    /* Form Container */
    .form-container {
      max-width: 700px;
      margin: 0 auto;
      padding: 60px 24px 100px;
      min-height: calc(100vh - 80px);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Steps */
    .step {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .step.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Question Title */
    .question-number {
      display: flex;
      align-items: baseline;
      gap: 12px;
      margin-bottom: 24px;
    }

    .question-number span {
      font-size: 18px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .question-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .question-title .required {
      color: #dc2626;
    }

    .question-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 8px;
      margin-bottom: 24px;
    }

    /* Form Elements */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .form-group label .required {
      color: #dc2626;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 16px;
      color: var(--text-primary);
      transition: all 0.2s;
      background: white;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(84, 113, 148, 0.1);
    }

    .form-input::placeholder {
      color: #9ca3af;
    }

    /* Phone Input */
    .phone-input-container {
      display: flex;
      gap: 8px;
    }

    .country-code {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: white;
      min-width: 100px;
      cursor: pointer;
    }

    .country-code img {
      width: 24px;
      height: 16px;
      object-fit: cover;
      border-radius: 2px;
    }

    .phone-input {
      flex: 1;
    }

    /* Radio & Checkbox */
    .options-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .option-item {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      padding: 4px 0;
    }

    .option-item input[type="radio"],
    .option-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: var(--primary-color);
      cursor: pointer;
    }

    .option-item label {
      font-size: 16px;
      color: var(--text-primary);
      cursor: pointer;
      flex: 1;
    }

    /* Select */
    .form-select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 16px;
      color: var(--text-primary);
      background: white;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 48px;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(84, 113, 148, 0.1);
    }

    /* Date Input */
    .date-input {
      position: relative;
    }

    .date-input input {
      padding-right: 48px;
    }

    .date-input svg {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary-color);
      pointer-events: none;
    }

    /* Consent Section */
    .consent-box {
      background: white;
      padding: 0;
    }

    .consent-box p {
      font-size: 15px;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }

    .consent-box ul {
      margin-left: 20px;
      margin-bottom: 24px;
    }

    .consent-box li {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .consent-box li ul {
      margin-top: 8px;
      margin-bottom: 8px;
    }

    .consent-box a {
      color: var(--primary-color);
      text-decoration: underline;
    }

    /* Checkbox list for products */
    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    @media (max-width: 600px) {
      .checkbox-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Continue Button */
    .btn-continue {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 32px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 32px;
    }

    .btn-continue:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(84, 113, 148, 0.3);
    }

    .btn-continue:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Submit Button */
    .btn-submit {
      background: var(--success-color);
    }

    .btn-submit:hover {
      box-shadow: 0 4px 12px rgba(52, 168, 83, 0.3);
    }

    /* Success Screen */
    .success-screen {
      text-align: center;
      padding: 40px 20px;
    }

    .success-logo {
      margin-bottom: 24px;
    }

    .success-logo img {
      height: 80px;
    }

    .success-logo span {
      display: block;
      font-size: 16px;
      color: var(--text-secondary);
      margin-top: 8px;
    }

    .success-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .success-text {
      font-size: 15px;
      color: var(--text-secondary);
      margin-bottom: 16px;
      line-height: 1.7;
    }

    .success-text strong {
      color: var(--text-primary);
    }

    .success-email {
      font-weight: 600;
      color: var(--text-primary);
    }

    .success-close {
      font-size: 14px;
      color: var(--primary-color);
      margin-top: 24px;
    }

    .success-close a {
      color: var(--primary-color);
    }

    /* Legal text */
    .legal-text {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 24px;
      line-height: 1.6;
    }

    .legal-text a {
      color: var(--primary-color);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-content {
        padding: 12px 16px;
      }

      .btn-previous {
        position: static;
        margin-bottom: 12px;
      }

      .header-content {
        flex-direction: column;
        gap: 12px;
      }

      .form-container {
        padding: 40px 16px 80px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .question-title {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="form-header">
    <div class="header-content">
      <a href="#" class="btn-previous hidden" id="btnPrevious" onclick="previousStep(); return false;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Anterior
      </a>
      <div class="header-logo">
        <img src="images/logo.png" alt="CEMI">
        <span>Investigación de Experiencia de Usuario</span>
      </div>
    </div>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar" style="width: 0%"></div>
    </div>
  </header>

  <!-- Form -->
  <main class="form-container">
    
    <!-- Step 1: Datos básicos -->
    <div class="step active" data-step="1">
      <h2 class="question-title">Ingresa tu información para continuar</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label>Nombre <span class="required">*</span></label>
          <input type="text" class="form-input" id="firstName" placeholder="" required>
        </div>
        <div class="form-group">
          <label>Apellido <span class="required">*</span></label>
          <input type="text" class="form-input" id="lastName" placeholder="" required>
        </div>
      </div>

      <div class="form-group">
        <label>Email <span class="required">*</span></label>
        <input type="email" class="form-input" id="email" placeholder="" required>
      </div>

      <div class="form-group">
        <label>Número de teléfono (para notificaciones)</label>
        <div class="phone-input-container">
          <div class="country-code">
            <img src="https://flagcdn.com/w40/ar.png" alt="Argentina">
            <span>+54</span>
          </div>
          <input type="tel" class="form-input phone-input" id="phone" placeholder="">
        </div>
        <p class="legal-text">
          Al ingresar tu número de teléfono, aceptas recibir mensajes para este evento vía SMS. 
          Pueden aplicar tarifas de mensajes y datos. Puedes recibir hasta 6 mensajes por evento. 
          Responde STOP para cancelar, HELP para ayuda. 
          Aplican la <a href="privacidad.html">Política de Privacidad</a> y los <a href="terminos.html">Términos de Servicio</a> de CEMI.
        </p>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Enviar</button>

      <p class="legal-text">
        Este sitio está protegido por reCAPTCHA y aplican la <a href="privacidad.html">Política de Privacidad</a> 
        y los <a href="terminos.html">Términos de Servicio</a> de CEMI.
      </p>
    </div>

    <!-- Step 2: Consentimiento -->
    <div class="step" data-step="2">
      <div class="question-number">
        <span>1.</span>
        <h2 class="question-title">Consentimiento <span class="required">*</span></h2>
      </div>

      <div class="consent-box">
        <p>Al marcar "Acepto" abajo, consientes que:</p>
        <ul>
          <li>Tu participación en esta encuesta es voluntaria y puedes elegir no enviar tus respuestas a CEMI ("CEMI").</li>
          <li>CEMI puede recopilar y usar tus respuestas para determinar tu elegibilidad para estudios de investigación de usuario de acuerdo con las <a href="privacidad.html">políticas de privacidad de CEMI</a>.</li>
          <li>CEMI puede compartir tus respuestas con sus afiliados y contratistas aprobados o agentes para ayudar a realizar estudios de investigación de usuario, basándose en nuestras instrucciones y de acuerdo con las medidas de confidencialidad y seguridad apropiadas.</li>
          <li>Tu información personal será utilizada para los propósitos descritos a continuación:
            <ul>
              <li>CEMI puede usar tu información personal como tu nombre, edad y género, en combinación con tus respuestas, para determinar tu elegibilidad para un estudio de investigación de usuario particular y para enviarte encuestas de seguimiento e invitaciones a estudios de manera continua.</li>
              <li>CEMI puede usar tu información personal sensible como tu uso de tecnología asistiva para asegurar un grupo de participantes inclusivo. Por favor indica que consientes explícitamente la recopilación y uso de tu información personal sensible para estos propósitos.</li>
            </ul>
          </li>
          <li>Proporcionar esta información o un cuestionario de seguimiento no garantiza que recibirás una invitación a ningún estudio, y recibir una invitación no garantiza que serás elegido para participar.</li>
          <li>Puedes optar por no ser contactado para estos estudios en cualquier momento usando el enlace al final de nuestros correos.</li>
          <li>Tienes al menos 18 años (o la mayoría de edad en tu país de residencia).</li>
        </ul>

        <div class="option-item">
          <input type="radio" name="consent" id="consent" value="agree" required>
          <label for="consent">Acepto</label>
        </div>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 3: Fecha de nacimiento -->
    <div class="step" data-step="3">
      <div class="question-number">
        <span>2.</span>
        <h2 class="question-title">¿Cuál es tu fecha de nacimiento? <span class="required">*</span></h2>
      </div>
      <p class="question-subtitle">Para calificar para nuestros estudios, debes tener 18 años o más.</p>

      <div class="form-group">
        <div class="date-input">
          <input type="date" class="form-input" id="birthdate" required>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
        </div>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 4: Género -->
    <div class="step" data-step="4">
      <div class="question-number">
        <span>3.</span>
        <h2 class="question-title">¿Cuál es tu género? <span class="required">*</span></h2>
      </div>

      <div class="options-list">
        <div class="option-item">
          <input type="radio" name="gender" id="male" value="male" required>
          <label for="male">Masculino</label>
        </div>
        <div class="option-item">
          <input type="radio" name="gender" id="female" value="female">
          <label for="female">Femenino</label>
        </div>
        <div class="option-item">
          <input type="radio" name="gender" id="nonbinary" value="nonbinary">
          <label for="nonbinary">No binario</label>
        </div>
        <div class="option-item">
          <input type="radio" name="gender" id="notanswer" value="notanswer">
          <label for="notanswer">Prefiero no responder</label>
        </div>
        <div class="option-item">
          <input type="radio" name="gender" id="selfdescribe" value="selfdescribe">
          <label for="selfdescribe">Prefiero auto-describirme</label>
        </div>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 5: País -->
    <div class="step" data-step="5">
      <div class="question-number">
        <span>4.</span>
        <h2 class="question-title">¿Dónde vives? <span class="required">*</span></h2>
      </div>

      <div class="form-group">
        <select class="form-select" id="country" required>
          <option value="">Selecciona una opción...</option>
          <option value="AR">Argentina</option>
          <option value="BO">Bolivia</option>
          <option value="BR">Brasil</option>
          <option value="CL">Chile</option>
          <option value="CO">Colombia</option>
          <option value="CR">Costa Rica</option>
          <option value="CU">Cuba</option>
          <option value="EC">Ecuador</option>
          <option value="SV">El Salvador</option>
          <option value="GT">Guatemala</option>
          <option value="HN">Honduras</option>
          <option value="MX">México</option>
          <option value="NI">Nicaragua</option>
          <option value="PA">Panamá</option>
          <option value="PY">Paraguay</option>
          <option value="PE">Perú</option>
          <option value="PR">Puerto Rico</option>
          <option value="DO">República Dominicana</option>
          <option value="UY">Uruguay</option>
          <option value="VE">Venezuela</option>
          <option value="ES">España</option>
          <option value="US">Estados Unidos</option>
          <option value="OTHER">Otro</option>
        </select>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 6: Ciudad -->
    <div class="step" data-step="6">
      <div class="question-number">
        <span>5.</span>
        <h2 class="question-title">¿En qué ciudad vives? <span class="required">*</span></h2>
      </div>

      <div class="form-group">
        <input type="text" class="form-input" id="city" placeholder="Ingresa una respuesta" required>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 7: Código Postal -->
    <div class="step" data-step="7">
      <div class="question-number">
        <span>6.</span>
        <h2 class="question-title">¿Cuál es tu Código Postal? <span class="required">*</span></h2>
      </div>

      <div class="form-group">
        <input type="text" class="form-input" id="postalCode" placeholder="Ingresa una respuesta" required>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 8: Frecuencia de contacto -->
    <div class="step" data-step="8">
      <div class="question-number">
        <span>7.</span>
        <h2 class="question-title">¿Con qué frecuencia te gustaría ser contactado para oportunidades de investigación? <span class="required">*</span></h2>
      </div>

      <div class="options-list">
        <div class="option-item">
          <input type="radio" name="frequency" id="monthly" value="monthly" required>
          <label for="monthly">Mensualmente</label>
        </div>
        <div class="option-item">
          <input type="radio" name="frequency" id="weekly" value="weekly">
          <label for="weekly">Semanalmente</label>
        </div>
        <div class="option-item">
          <input type="radio" name="frequency" id="daily" value="daily">
          <label for="daily">Diariamente</label>
        </div>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 9: Trabajo en educación -->
    <div class="step" data-step="9">
      <div class="question-number">
        <span>8.</span>
        <h2 class="question-title">¿Trabajas en educación? <span class="required">*</span></h2>
      </div>

      <div class="options-list">
        <div class="option-item">
          <input type="radio" name="education" id="k12" value="k12" required>
          <label for="k12">Sí, principalmente en educación primaria y secundaria</label>
        </div>
        <div class="option-item">
          <input type="radio" name="education" id="higher" value="higher">
          <label for="higher">Sí, principalmente en educación superior</label>
        </div>
        <div class="option-item">
          <input type="radio" name="education" id="noedu" value="no">
          <label for="noedu">No</label>
        </div>
      </div>

      <button type="button" class="btn-continue" onclick="nextStep()">Continuar</button>
    </div>

    <!-- Step 10: Productos CEMI -->
    <div class="step" data-step="10">
      <div class="question-number">
        <span>9.</span>
        <h2 class="question-title">¿Cuáles de los siguientes productos y servicios de CEMI usas regularmente? Marca todos los que apliquen. <span class="required">*</span></h2>
      </div>
      <p class="question-subtitle">Queremos escuchar a todos, usuarios y no usuarios por igual. Por favor responde honestamente.</p>

      <div class="checkbox-grid">
        <div class="option-item">
          <input type="checkbox" name="products" id="classroom" value="classroom">
          <label for="classroom">CEMI Classroom</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="calendar" value="calendar">
          <label for="calendar">Calendario</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="chat" value="chat">
          <label for="chat">Chat</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="biblioteca" value="biblioteca">
          <label for="biblioteca">Biblioteca de Recursos</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="evaluaciones" value="evaluaciones">
          <label for="evaluaciones">Evaluaciones</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="tareas" value="tareas">
          <label for="tareas">Tareas</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="anuncios" value="anuncios">
          <label for="anuncios">Anuncios</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="dashboard" value="dashboard">
          <label for="dashboard">Dashboard</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="perfil" value="perfil">
          <label for="perfil">Perfil de Usuario</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="pagos" value="pagos">
          <label for="pagos">Sistema de Pagos</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="asistencia" value="asistencia">
          <label for="asistencia">Control de Asistencia</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="reportes" value="reportes">
          <label for="reportes">Reportes y Estadísticas</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="notificaciones" value="notificaciones">
          <label for="notificaciones">Notificaciones</label>
        </div>
        <div class="option-item">
          <input type="checkbox" name="products" id="ninguno" value="ninguno">
          <label for="ninguno">Ninguno de los anteriores</label>
        </div>
      </div>

      <button type="button" class="btn-continue btn-submit" onclick="submitForm()">Enviar</button>
    </div>

    <!-- Step 11: Success -->
    <div class="step" data-step="11">
      <div class="success-screen">
        <div class="success-logo">
          <img src="images/logo.png" alt="CEMI">
          <span>Investigación de Experiencia de Usuario</span>
        </div>

        <h2 class="success-title">¡Ya estás inscrito! Bienvenido a la Investigación de Usuario de CEMI</h2>
        <p class="success-text">Muchas gracias por tomarte el tiempo de contarnos sobre ti.</p>

        <p class="success-text">
          <strong>¿Qué sigue?</strong><br>
          Ahora que sabemos un poco sobre ti, tu perfil está oficialmente activo en nuestro sistema. 
          Lo estaremos comparando con todos nuestros próximos estudios para encontrar la combinación perfecta.
        </p>

        <p class="success-text">
          Mantén un ojo en tu bandeja de entrada. Cuando llegue el estudio adecuado, recibirás una invitación de 
          <span class="success-email">investigacion@cemi.edu.ar</span>.
        </p>

        <p class="success-text">¡Estamos emocionados de escuchar tus ideas pronto!</p>

        <p class="success-close">
          <a href="classroom.html">(Puedes cerrar esta ventana ahora)</a>
        </p>
      </div>
    </div>

  </main>

  <script>
    let currentStep = 1;
    const totalSteps = 11;

    function updateProgress() {
      const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
      
      // Show/hide previous button
      const btnPrevious = document.getElementById('btnPrevious');
      if (currentStep > 1 && currentStep < totalSteps) {
        btnPrevious.classList.remove('hidden');
      } else {
        btnPrevious.classList.add('hidden');
      }
    }

    function showStep(step) {
      // Hide all steps
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      
      // Show current step
      const currentStepEl = document.querySelector(`.step[data-step="${step}"]`);
      if (currentStepEl) {
        currentStepEl.classList.add('active');
      }
      
      updateProgress();
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function validateStep(step) {
      const stepEl = document.querySelector(`.step[data-step="${step}"]`);
      const requiredInputs = stepEl.querySelectorAll('[required]');
      
      for (let input of requiredInputs) {
        if (input.type === 'radio') {
          const name = input.name;
          const checked = stepEl.querySelector(`input[name="${name}"]:checked`);
          if (!checked) {
            alert('Por favor completa todos los campos requeridos');
            return false;
          }
        } else if (!input.value.trim()) {
          alert('Por favor completa todos los campos requeridos');
          input.focus();
          return false;
        }
      }
      
      // Special validation for email
      if (step === 1) {
        const email = document.getElementById('email').value;
        if (!email.includes('@')) {
          alert('Por favor ingresa un email válido');
          return false;
        }
      }
      
      // Validate age (must be 18+)
      if (step === 3) {
        const birthdate = new Date(document.getElementById('birthdate').value);
        const today = new Date();
        let age = today.getFullYear() - birthdate.getFullYear();
        const monthDiff = today.getMonth() - birthdate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthdate.getDate())) {
          age--;
        }
        if (age < 18) {
          alert('Debes tener al menos 18 años para participar');
          return false;
        }
      }
      
      return true;
    }

    function nextStep() {
      if (validateStep(currentStep)) {
        if (currentStep < totalSteps) {
          currentStep++;
          showStep(currentStep);
        }
      }
    }

    function previousStep() {
      if (currentStep > 1) {
        currentStep--;
        showStep(currentStep);
      }
    }

    function submitForm() {
      if (validateStep(currentStep)) {
        // Here you would normally send the data to the server
        // For now, just show success screen
        currentStep = 11;
        showStep(currentStep);
      }
    }

    // Initialize
    updateProgress();
  </script>
</body>
</html>
